import pandas as pd
from sklearn.preprocessing import OneHotEncoder

# Assuming df is your DataFrame
# Select columns to check correlation with DQ
columns_to_check = ['Mapping', 'Amortization Type', 'Final LTV Bucket', 'IssuanceDateBucket']

# One-hot encode the categorical columns
encoder = OneHotEncoder(drop='first')
encoded_columns = encoder.fit_transform(df[columns_to_check])

# Create a DataFrame from the encoded columns
encoded_df = pd.DataFrame(encoded_columns.toarray(), columns=encoder.get_feature_names_out(columns_to_check))

# Add the DQ column
encoded_df['DQ'] = df['DQ']

# Calculate correlation between DQ and the encoded columns
correlation_matrix = encoded_df.corr()['DQ']

# Display correlations for the user
import ace_tools as tools; tools.display_dataframe_to_user(name="Correlation with DQ", dataframe=correlation_matrix)

correlation_matrix
