fig = make_subplots(specs=[[{"secondary_y": True}]])

# Add traces for "France" data on the primary y-axis
for col in pivot_df.columns:
    if col.startswith("France"):
        fig.add_trace(
            go.Scatter(x=pivot_df.index, y=pivot_df[col], mode='lines', name=col),
            secondary_y=False
        )

# Add traces for "Spain" data on the secondary y-axis
for col in pivot_df.columns:
    if col.startswith("Spain"):
        fig.add_trace(
            go.Scatter(x=pivot_df.index, y=pivot_df[col], mode='lines', name=col),
            secondary_y=True
        )

# Step 5: Update layout to add title, axis labels, and range slider
fig.update_layout(
    title='Sum of Fair Value per Asset Class Over Time',
    xaxis_title='Date',
    yaxis_title='Sum of Fair Value (France)',
    yaxis2_title='Sum of Fair Value (Spain)',
    legend_title='Asset Class',
    xaxis=dict(
        rangeselector=dict(
            buttons=list([
                dict(count=1, label="1m", step="month", stepmode="backward"),
                dict(count=6, label="6m", step="month", stepmode="backward"),
                dict(count=1, label="YTD", step="year", stepmode="todate"),
                dict(count=1, label="1y", step="year", stepmode="backward"),
                dict(step="all")
            ])
        ),
        rangeslider=dict(visible=True),
        type="date"
    )
)

fig.show()
