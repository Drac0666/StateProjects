import requests
from datetime import datetime, timedelta

# Calculate yesterday's date
yesterday = datetime.now() - timedelta(days=1)
date_str = yesterday.strftime('%Y-%m-%d')

# ECB Data Portal API endpoint for exchange rates
url = f'https://data-api.ecb.europa.eu/service/data/EXR/D.USD.EUR.SP00.A?startPeriod={date_str}&endPeriod={date_str}&format=jsondata'

# Make the request
response = requests.get(url)
data = response.json()

# Extract the exchange rate
try:
    rate = data['dataSets'][0]['series']['0:0:0:0:0']['observations']['0'][0]
    print(f"USD to EUR exchange rate on {date_str}: {rate}")
except KeyError:
    print(f"No exchange rate data available for {date_str}")
