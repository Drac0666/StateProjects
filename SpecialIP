import plotly.graph_objects as go
import numpy as np

# Sample data
np.random.seed(42)
X = np.random.rand(100)
Y = np.random.rand(100)
Z = np.random.rand(100)

# Determine colors based on Z value
colors = ['red' if z >= 0.2 else 'blue' for z in Z]

# Create 3D scatter plot
fig = go.Figure()

fig.add_trace(go.Scatter3d(
    x=X,
    y=Y,
    z=Z,
    mode='markers',
    marker=dict(
        size=5,
        color=colors,  # Assign colors based on Z value
        opacity=0.8
    )
))

# Update layout
fig.update_layout(
    title='3D Scatter Plot of X, Y, Z',
    scene=dict(
        xaxis_title='X-axis',
        yaxis_title='Y-axis',
        zaxis_title='Z-axis'
    )
)

# Show the plot
fig.show()
