from datetime import datetime, timedelta
import numpy as np

# Function to get a previous business day, with an option to specify how many business days to go back
def previous_business_day(days_back: int = 1) -> datetime:
    today = datetime.today()
    
    # Create a timedelta array representing how far to move back each step
    delta_days = np.arange(1, days_back + 1) * -1
    
    # Iterate back until we find the requested number of business days ago
    for delta in delta_days:
        candidate_day = today + timedelta(days=delta)
        # Check if the candidate day is a weekday (Mon-Fri)
        if candidate_day.weekday() < 5:  # 0 = Monday, 4 = Friday
            days_back -= 1
            if days_back == 0:
                return candidate_day

# Example usage:
# Get the previous business day (default, 1 business day back)
t1_day = previous_business_day()

# Get the date 5 business days back
t5_day = previous_business_day(5)

print("T-1 Business Day:", t1_day.strftime('%d/%m/%Y'))
print("T-5 Business Day:", t5_day.strftime('%d/%m/%Y'))
