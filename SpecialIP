import pandas as pd
import plotly.express as px

# Step 1: Load file into DataFrame
file_path = 'your_file.csv'  # Update with your file path
df = pd.read_csv(file_path)

# Step 2: Filter columns containing "HPI" in their names
hpi_df = df.filter(regex='HPI')
hpi_df['Date'] = df['Date']  # Include the "Date" column as strings

# Step 3: Function to plot a 10-row window starting from a specific date (string)
def plot_hpi_from_date(start_date):
    # Ensure the start_date exists in the Date column
    if start_date not in hpi_df['Date'].values:
        print(f"Date '{start_date}' not found in the data.")
        return
    
    # Find the index of the row with the specified start date
    start_index = hpi_df.index[hpi_df['Date'] == start_date][0]
    end_index = min(start_index + 10, len(hpi_df))
    
    # Extract the 10-row window and reset index for plotting
    window_df = hpi_df.iloc[start_index:end_index].reset_index(drop=True)
    
    # Plot using Plotly with "Date" as the x-axis
    fig = px.line(window_df, x='Date', y=window_df.columns[:-1], title=f"HPI Data from '{start_date}' to '{window_df['Date'].iloc[-1]}'")
    fig.update_layout(xaxis_title='Date', yaxis_title='HPI Value')
    fig.show()

# Example usage
plot_hpi_from_date("2022-01-01")  # Replace with your start date as a string
