import pandas as pd
import matplotlib.pyplot as plt
import matplotlib.ticker as ticker
import calendar

# ... (Your code for reading and preparing data)

# Use a more distinct color palette
cmap = plt.cm.get_cmap('tab20') # Or choose a different colormap

# Plot - Select colors based on Sub-Asset Class or Designation 
if 'Designation' in df_pivoted.columns:  # Color by Designation
    designations = df_grouped.index.get_level_values('Designation').unique()
    colors = cmap(range(len(designations)))

    for i, designation in enumerate(designations):
        bars = df_pivoted[designation]
        bars.plot(kind='bar', color=colors[i])

else:  # Color by Sub-Asset Class
    sub_asset_classes = df_grouped.index.get_level_values('Sub-Asset Class').unique()
    colors = cmap(range(len(sub_asset_classes))) 

    for i, sub_asset_class in enumerate(sub_asset_classes):
        bars = df_pivoted[sub_asset_class]
        bars.plot(kind='bar', color=colors[i])


# ... (Rest of the code: customization, legend, saving)
