import pandas as pd
import matplotlib.pyplot as plt
from matplotlib.colors import ListedColormap

# Sample data creation (replace this with your actual data)
data = {'Sub-Asset Class': ['A', 'B', 'C', 'A', 'B', 'C', 'A', 'B', 'C'],
        'Designation': ['X', 'X', 'X', 'Y', 'Y', 'Y', 'Z', 'Z', 'Z'],
        'Value': [10, 15, 20, 25, 30, 35, 40, 45, 50]}
df = pd.DataFrame(data)

# Two-level groupby
grouped = df.groupby(['Sub-Asset Class', 'Designation']).sum()

# Combine unique values from both levels of groupby
unique_values = grouped.index.unique().to_list()

# Create a colormap
cmap = ListedColormap(plt.cm.get_cmap('tab10').colors[:len(unique_values)])

# Create a mapping of colors for each unique value using the colormap
color_mapping = dict(zip(unique_values, cmap.colors))

# Plotting
grouped.plot(kind='bar', color=grouped.index.map(color_mapping))
plt.title('Grouped Plot')
plt.show()
