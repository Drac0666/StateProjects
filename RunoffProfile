import pandas as pd
import matplotlib.pyplot as plt
from matplotlib.colors import ListedColormap

# Sample data creation (replace this with your actual data)
data = {'Sub-Asset Class': ['A', 'B', 'C', 'A', 'B', 'C', 'A', 'B', 'C'],
        'Designation': ['X', 'X', 'Y', 'X', 'Y', 'Y', 'X', 'Y', 'Y'],
        'Value': [10, 15, 20, 25, 30, 35, 40, 45, 50]}

df = pd.DataFrame(data)

# Combine unique values from both groupby levels
unique_values = pd.MultiIndex.from_frame(df.groupby(['Sub-Asset Class', 'Designation']).size().reset_index()).tolist()

# Create a colormap
cmap = ListedColormap(plt.cm.get_cmap('tab10').colors[:len(unique_values)])

# Create a mapping of colors for each unique combination using the colormap
color_mapping = dict(zip(unique_values, cmap.colors))

# Group by and plot
grouped = df.groupby(['Sub-Asset Class', 'Designation'])
for name, group in grouped:
    color = color_mapping[name]
    group.plot(x='Sub-Asset Class', y='Value', kind='bar', color=color, label=name)

plt.title('Grouped Plot')
plt.legend(title=('Sub-Asset Class', 'Designation'))
plt.show()
