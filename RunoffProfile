import pandas as pd
import matplotlib.pyplot as plt
import matplotlib.ticker as ticker
import calendar

# ... (Your code for reading and preparing data)

# Plot
plt.figure(figsize=(12, 6)) 
df_pivoted.plot(kind='bar')

# Customize plot elements 
plt.xticks(range(len(month_names)), month_names) 
plt.xlabel('Maturity Month')
plt.ylabel('Par Value (2024)')
plt.title('Par Value by Maturity Month, Sub-Asset Class, and Designation (2024)')

# Format y-axis in millions
plt.gca().yaxis.set_major_formatter(ticker.FuncFormatter(lambda x, pos: f'{x / 1e6:.1f}M'))

plt.tight_layout()

# Move legend outside the plot
plt.legend(title='Sub-Asset Class / Designation', bbox_to_anchor=(1.05, 1), loc='upper left') 

# Save as JPG
plt.savefig('maturity_plot.jpg', dpi=300) 

plt.show()  
